{
  "userStories": [
    {
      "id": "AST-001",
      "title": "Create validation types",
      "category": "validation",
      "description": "Create src/lib/validation/types.ts with PatternId type ('nestedLoops' | 'swapCalls' | 'recursion' | 'partitionCalls'), PatternRequirement interface (anyOf: PatternId[], errorMessage: string), and ValidationResult interface (valid: boolean, error?: string).",
      "stepsToVerify": [
        "src/lib/validation/types.ts exists",
        "PatternId type exported",
        "PatternRequirement interface exported",
        "ValidationResult interface exported",
        "typecheck passes"
      ],
      "passes": true
    },
    {
      "id": "AST-002",
      "title": "Export parseSync from SWC initializer",
      "category": "validation",
      "description": "Modify src/lib/execution/swcInitializer.ts to import and export parseSync from @swc/wasm-web alongside existing transformSync.",
      "stepsToVerify": [
        "parseSync imported from @swc/wasm-web",
        "parseSync exported from swcInitializer.ts",
        "typecheck passes"
      ],
      "passes": true
    },
    {
      "id": "AST-003",
      "title": "Create AST analyzer with pattern detection",
      "category": "validation",
      "description": "Create src/lib/validation/astAnalyzer.ts with: parseCode(code) wrapping SWC parseSync, hasNestedLoops(ast) detecting for/while inside for/while, hasSwapCalls(ast) detecting .swap() method calls, hasRecursion(ast) detecting function calling itself, hasPartitionCalls(ast) detecting .partition() calls, validatePatterns(code, requirement) as main entry point.",
      "stepsToVerify": [
        "src/lib/validation/astAnalyzer.ts exists",
        "parseCode function exported",
        "hasNestedLoops function exported",
        "hasSwapCalls function exported",
        "hasRecursion function exported",
        "hasPartitionCalls function exported",
        "validatePatterns function exported",
        "typecheck passes"
      ],
      "passes": true
    },
    {
      "id": "AST-004",
      "title": "Create AST analyzer unit tests",
      "category": "validation",
      "description": "Create src/lib/validation/astAnalyzer.test.ts with tests for: hasNestedLoops detecting for-for, while-for, for-while loops and rejecting single loops; hasRecursion detecting direct recursion and arrow function recursion; hasSwapCalls detecting arr.swap() calls; hasPartitionCalls detecting arr.partition() calls; validatePatterns returning valid/invalid correctly.",
      "stepsToVerify": [
        "src/lib/validation/astAnalyzer.test.ts exists",
        "tests for hasNestedLoops exist",
        "tests for hasRecursion exist",
        "tests for hasSwapCalls exist",
        "tests for hasPartitionCalls exist",
        "npm run test:run passes"
      ],
      "passes": true
    },
    {
      "id": "AST-005",
      "title": "Add patternRequirement to TestCase interface",
      "category": "testing",
      "description": "Modify src/lib/testing/types.ts to import PatternRequirement from validation types and add optional patternRequirement?: PatternRequirement field to TestCase interface.",
      "stepsToVerify": [
        "PatternRequirement imported in types.ts",
        "patternRequirement field added to TestCase interface",
        "typecheck passes"
      ],
      "passes": true
    },
    {
      "id": "AST-006",
      "title": "Update array tests with pattern requirements",
      "category": "testing",
      "description": "Modify src/lib/testing/testCases/arrayTests.ts to add patternRequirement to medium test (anyOf: ['nestedLoops', 'swapCalls']) and hard test (anyOf: ['recursion', 'partitionCalls']) with appropriate error messages explaining expected algorithm.",
      "stepsToVerify": [
        "array-sort-medium has patternRequirement with nestedLoops or swapCalls",
        "array-sort-hard has patternRequirement with recursion or partitionCalls",
        "error messages explain expected algorithm",
        "typecheck passes"
      ],
      "passes": true
    },
    {
      "id": "AST-007",
      "title": "Integrate validation into testRunner",
      "category": "testing",
      "description": "Modify src/lib/testing/testRunner.ts to import validatePatterns from validation module and add validation check before test execution: if testCase.patternRequirement exists, call validatePatterns and return early with error if validation fails.",
      "stepsToVerify": [
        "validatePatterns imported in testRunner.ts",
        "validation check added before execution",
        "returns early with error when validation fails",
        "typecheck passes"
      ],
      "passes": true
    },
    {
      "id": "AST-008",
      "title": "Create validation index export",
      "category": "validation",
      "description": "Create src/lib/validation/index.ts to export all types and functions from the validation module.",
      "stepsToVerify": [
        "src/lib/validation/index.ts exists",
        "exports types from types.ts",
        "exports functions from astAnalyzer.ts",
        "typecheck passes"
      ],
      "passes": false
    },
    {
      "id": "AST-009",
      "title": "Full validation passes",
      "category": "verification",
      "description": "Run npm run validate to ensure lint, format, typecheck, and all tests pass.",
      "stepsToVerify": ["npm run validate passes with no errors"],
      "passes": false
    }
  ]
}
