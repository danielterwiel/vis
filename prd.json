{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "version": "2.0.0",
  "project": {
    "name": "Data Structure Visualizer",
    "description": "CodePen-like application for visualizing data structures with real-time animated visualization. 100% client-side, no backend.",
    "repository": "https://github.com/user/vis"
  },
  "metadata": {
    "createdAt": "2026-01-15",
    "lastUpdated": "2026-01-15",
    "methodology": "Ralph Wiggum - Autonomous AI Agent Development",
    "validationCommand": "npm run validate",
    "devServer": "npm run dev",
    "devServerPort": 5175,
    "iteration": 2,
    "testingTool": "agent-browser"
  },
  "userStories": [
    {
      "id": "UI-001",
      "category": "UI Cleanup",
      "priority": "high",
      "title": "Remove duplicate Run All Tests button",
      "description": "There are two 'Run All Tests' buttons - one at the top of the editor panel and one below the 'Test Cases' heading. Remove the one below 'Test Cases' to reduce UI clutter.",
      "acceptanceCriteria": [
        "Only one 'Run All Tests' button exists in the UI",
        "The remaining button is at the top of the editor panel",
        "Button still runs all tests correctly"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175",
        "agent-browser snapshot -i",
        "Verify only one 'Run all tests' button appears in snapshot",
        "agent-browser click on Run All Tests button",
        "Verify tests execute correctly"
      ],
      "affectedFiles": ["src/components/TestPanel/TestPanel.tsx"],
      "passes": true
    },
    {
      "id": "UI-002",
      "category": "UI Cleanup",
      "priority": "medium",
      "title": "Remove Skeleton button",
      "description": "The 'Skeleton' button in the visualization mode buttons doesn't provide significant value. Remove it from the UI.",
      "acceptanceCriteria": [
        "No 'Skeleton' button appears in the visualization mode buttons",
        "Other visualization mode buttons (My Execution, Show Expected, Compare) still work"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175",
        "agent-browser snapshot -i",
        "Verify no 'Skeleton' button in snapshot"
      ],
      "affectedFiles": ["src/components/VisualizationPanel/VisualizationPanel.tsx"],
      "passes": true
    },
    {
      "id": "UI-003",
      "category": "UI Cleanup",
      "priority": "low",
      "title": "Hide 'No operation' text when no steps exist",
      "description": "In the Graph visualizer, a 'No operation' div is shown when there are no steps. This looks weird - if there are no steps, don't render anything there.",
      "acceptanceCriteria": [
        "No 'No operation' text visible in visualization panel when there are no steps",
        "Step indicator renders normally when steps exist"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=graph",
        "agent-browser snapshot -c -d 6",
        "Verify no 'No operation' text in snapshot"
      ],
      "affectedFiles": ["src/components/visualizers/GraphVisualization.tsx"],
      "passes": false
    },
    {
      "id": "BUG-ARRAY-001",
      "category": "Reference Solution",
      "priority": "critical",
      "title": "Array reference solutions return undefined",
      "description": "When clicking 'Show Solution' and then 'Run All Tests' for Array, all tests fail with 'Expected undefined to equal [sorted array]'. The reference solutions are not executing or returning values correctly.",
      "acceptanceCriteria": [
        "Array Sort Small Array test passes with expected output [1,2,5,8,9]",
        "Array Bubble Sort test passes with expected output [11,12,22,25,34,64,90]",
        "Array Quick Sort test passes with expected output [10,30,40,50,70,80,90]",
        "All 3 Array tests show as passed (3/3 passed)"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=array",
        "agent-browser snapshot -i",
        "agent-browser click on Show Solution button",
        "agent-browser click on Run all tests button",
        "sleep 2",
        "agent-browser snapshot -c -d 6",
        "Verify '3/3 passed' in snapshot text"
      ],
      "technicalNotes": "Reference solutions are in src/lib/testing/testCases/arrayTests.ts. Check how solutions are loaded and executed in the sandbox.",
      "affectedFiles": [
        "src/lib/testing/testCases/arrayTests.ts",
        "src/lib/execution/sandboxExecutor.ts"
      ],
      "passes": true
    },
    {
      "id": "BUG-LINKEDLIST-001",
      "category": "Reference Solution",
      "priority": "critical",
      "title": "Linked List reference solutions return null",
      "description": "When clicking 'Show Solution' and then 'Run All Tests' for Linked List, all tests fail returning null instead of expected values.",
      "acceptanceCriteria": [
        "Find Element in List test passes (returns 30)",
        "Reverse Linked List test passes (returns [5,4,3,2,1])",
        "Detect and Handle Cycle test passes (returns false)",
        "All 3 Linked List tests show as passed"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=linkedList",
        "agent-browser snapshot -i",
        "agent-browser click on Show Solution button",
        "agent-browser click on Run all tests button",
        "sleep 2",
        "agent-browser snapshot -c -d 6",
        "Verify '3/3 passed' in snapshot text"
      ],
      "affectedFiles": [
        "src/lib/testing/testCases/linkedListTests.ts",
        "src/lib/testing/types.ts",
        "src/lib/testing/testRunner.ts"
      ],
      "passes": true
    },
    {
      "id": "BUG-LINKEDLIST-002",
      "category": "Visualization",
      "priority": "medium",
      "title": "Linked List visualization shows 'null undefined' rendering bug",
      "description": "The LinkedList visualization shows 'null undefined [0] HEAD TAIL' which appears to be rendering placeholder or initial state incorrectly.",
      "acceptanceCriteria": [
        "LinkedList visualization shows meaningful node data, not 'null undefined'",
        "HEAD and TAIL pointers are positioned correctly",
        "Initial state shows the actual linked list data from the test case"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=linkedList",
        "agent-browser snapshot -c -d 6",
        "Verify visualization does not contain 'null undefined' text"
      ],
      "affectedFiles": ["src/components/visualizers/LinkedListVisualization.tsx"],
      "passes": false
    },
    {
      "id": "BUG-STACK-001",
      "category": "Test Cases",
      "priority": "critical",
      "title": "Stack and Queue share tests without filtering",
      "description": "Both Stack and Queue data structures return the same stackQueueTests array without filtering. Stack page shows Queue test cases like 'Basic Queue Operations' and 'Interleave Two Halves of Queue'. Queue page shows Stack tests like 'Balanced Parentheses Checker' and 'Min Stack'.",
      "acceptanceCriteria": [
        "Stack page only shows Stack-related tests (Balanced Parentheses, Min Stack)",
        "Queue page only shows Queue-related tests (Basic Queue Operations, Reverse First K, Interleave)",
        "Each data structure has exactly 3 tests (easy, medium, hard)"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=stack",
        "agent-browser snapshot -c -d 6",
        "Verify only 3 tests are shown and all relate to Stack operations",
        "agent-browser navigate http://localhost:5175/?ds=queue",
        "agent-browser snapshot -c -d 6",
        "Verify only 3 tests are shown and all relate to Queue operations"
      ],
      "technicalNotes": "Root cause is in src/App.tsx lines 75-77 where both 'stack' and 'queue' cases return stackQueueTests without filtering. Tests should be filtered by their id prefix (stack- vs queue-).",
      "affectedFiles": ["src/App.tsx", "src/lib/testing/testCases/stackQueueTests.ts"],
      "passes": true
    },
    {
      "id": "BUG-STACK-002",
      "category": "Runtime Error",
      "priority": "critical",
      "title": "createTrackedStack is not defined in sandbox",
      "description": "When running Stack tests, errors occur: 'createTrackedStack is not defined'. The factory function for creating tracked stacks is not available in the sandbox environment.",
      "acceptanceCriteria": [
        "createTrackedStack function is available in sandbox",
        "Stack tests execute without 'not defined' errors",
        "Stack reference solutions pass all tests"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=stack",
        "agent-browser click on Show Solution button",
        "agent-browser click on Run all tests button",
        "sleep 2",
        "agent-browser snapshot -c -d 6",
        "Verify no 'createTrackedStack is not defined' error in snapshot"
      ],
      "affectedFiles": [
        "src/lib/execution/sandboxExecutor.ts",
        "src/lib/testing/trackedStackBundle.ts"
      ],
      "passes": true
    },
    {
      "id": "BUG-QUEUE-001",
      "category": "Runtime Error",
      "priority": "critical",
      "title": "createTrackedQueue is not defined in sandbox",
      "description": "When running Queue tests, errors occur: 'createTrackedQueue is not defined'. The factory function for creating tracked queues is not available in the sandbox environment.",
      "acceptanceCriteria": [
        "createTrackedQueue function is available in sandbox",
        "Queue tests execute without 'not defined' errors",
        "Queue reference solutions pass all tests"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=queue",
        "agent-browser click on Show Solution button",
        "agent-browser click on Run all tests button",
        "sleep 2",
        "agent-browser snapshot -c -d 6",
        "Verify no 'createTrackedQueue is not defined' error in snapshot"
      ],
      "affectedFiles": [
        "src/lib/execution/sandboxExecutor.ts",
        "src/lib/testing/trackedQueueBundle.ts"
      ],
      "passes": true
    },
    {
      "id": "BUG-BINARYTREE-001",
      "category": "Reference Solution",
      "priority": "critical",
      "title": "Binary Tree solutions return arrays with null values",
      "description": "Binary Tree reference solutions return arrays with null values interspersed. Example: 'Expected [null,20,null,30,null,40,...] to equal [20,30,40,50,60,70,80]'. The traversal is including null children in the result.",
      "acceptanceCriteria": [
        "In-Order Traversal test passes with [20,30,40,50,60,70,80]",
        "Validate BST Property test passes (returns boolean true)",
        "Balance an Unbalanced BST test passes with [1,2,3,4,5,6,7]",
        "All 3 Binary Tree tests show as passed"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=tree",
        "agent-browser click on Show Solution button",
        "agent-browser click on Run all tests button",
        "sleep 2",
        "agent-browser snapshot -c -d 6",
        "Verify '3/3 passed' in snapshot text"
      ],
      "affectedFiles": [
        "src/lib/testing/testCases/binaryTreeTests.ts",
        "src/lib/dataStructures/TrackedBinaryTree.ts"
      ],
      "passes": true
    },
    {
      "id": "BUG-GRAPH-001",
      "category": "Reference Solution",
      "priority": "critical",
      "title": "Graph solutions return undefined - graph methods not working",
      "description": "Graph reference solutions return undefined. The solutions call graph.bfs(start) and graph.hasCycle() but these methods may not be available or working correctly in the sandbox.",
      "acceptanceCriteria": [
        "BFS Traversal test passes with [A,B,C,D,E]",
        "Detect Cycle test passes (returns true)",
        "Dijkstra's Shortest Path test passes with [A,C,B,D,E]",
        "All 3 Graph tests show as passed"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=graph",
        "agent-browser click on Show Solution button",
        "agent-browser click on Run all tests button",
        "sleep 2",
        "agent-browser snapshot -c -d 6",
        "Verify '3/3 passed' in snapshot text"
      ],
      "technicalNotes": "TrackedGraph class has bfs() and hasCycle() methods in src/lib/dataStructures/TrackedGraph.ts. Verify the bundle exposes these methods correctly.",
      "affectedFiles": [
        "src/lib/testing/testCases/graphTests.ts",
        "src/lib/testing/trackedGraphBundle.ts"
      ],
      "passes": true
    },
    {
      "id": "BUG-HASHMAP-001",
      "category": "Reference Solution",
      "priority": "critical",
      "title": "HashMap solutions fail with property access errors",
      "description": "HashMap reference solutions fail with errors like 'Cannot read properties of undefined (reading size)' and 'Cannot read properties of undefined (reading char)'. The HashMap data structure is not properly initialized or accessible.",
      "acceptanceCriteria": [
        "Basic Get/Set Operations test passes with [3,7,11]",
        "Collision Handling with Chaining test passes",
        "Character Frequency Counter test passes",
        "All 3 HashMap tests show as passed"
      ],
      "stepsToVerify": [
        "agent-browser navigate http://localhost:5175/?ds=hashMap",
        "agent-browser click on Show Solution button",
        "agent-browser click on Run all tests button",
        "sleep 2",
        "agent-browser snapshot -c -d 6",
        "Verify '3/3 passed' in snapshot text"
      ],
      "affectedFiles": [
        "src/lib/testing/testCases/hashMapTests.ts",
        "src/lib/testing/trackedHashMapBundle.ts",
        "src/lib/testing/testRunner.ts"
      ],
      "passes": true
    },
    {
      "id": "ENH-001",
      "category": "Enhancement",
      "priority": "low",
      "title": "Align challenges with popular algorithm platforms",
      "description": "The code challenges and test cases should resemble popular algorithm and data structure challenges from platforms like Structy, GreatFrontend, and LeetCode. This makes the visualizer more relevant and educational.",
      "acceptanceCriteria": [
        "Test case descriptions match common algorithm problem formats",
        "Problems have clear input/output specifications",
        "Difficulty levels align with industry standards"
      ],
      "stepsToVerify": [
        "Review test cases in src/lib/testing/testCases/",
        "Compare with popular platforms like LeetCode and Structy",
        "Verify problem statements are clear and educational"
      ],
      "affectedFiles": ["src/lib/testing/testCases/*.ts"],
      "passes": false
    }
  ],
  "knownIssues": {
    "criticalBlocking": [
      "BUG-ARRAY-001: Array reference solutions return undefined instead of sorted arrays",
      "BUG-LINKEDLIST-001: Linked List reference solutions return null",
      "BUG-STACK-001: Stack and Queue share tests without proper filtering",
      "BUG-STACK-002: createTrackedStack is not defined in sandbox",
      "BUG-QUEUE-001: createTrackedQueue is not defined in sandbox",
      "BUG-BINARYTREE-001: Binary Tree solutions return arrays with null values",
      "BUG-GRAPH-001: Graph solutions return undefined - graph.bfs() not working",
      "BUG-HASHMAP-001: HashMap solutions fail with property access errors"
    ],
    "uiCleanup": [
      "UI-001: Two 'Run All Tests' buttons - remove duplicate",
      "UI-002: 'Skeleton' button should be removed",
      "UI-003: 'No operation' text shown in Graph visualizer when no steps"
    ],
    "visualization": [
      "BUG-LINKEDLIST-002: LinkedList visualization shows 'null undefined' rendering bug"
    ],
    "enhancements": ["ENH-001: Align challenges with popular algorithm platforms"],
    "fixPriority": [
      "1. BUG-STACK-001 - Separate Stack and Queue test filtering (foundational)",
      "2. BUG-STACK-002/BUG-QUEUE-001 - Fix factory functions in sandbox",
      "3. BUG-ARRAY-001 - Fix Array reference solutions",
      "4. BUG-LINKEDLIST-001 - Fix Linked List reference solutions",
      "5. BUG-BINARYTREE-001 - Fix Binary Tree null value issue",
      "6. BUG-GRAPH-001 - Fix Graph method availability",
      "7. BUG-HASHMAP-001 - Fix HashMap property access",
      "8. UI issues (UI-001, UI-002, UI-003)",
      "9. BUG-LINKEDLIST-002 - Fix visualization rendering",
      "10. ENH-001 - Align with popular platforms"
    ]
  },
  "completionCriteria": {
    "required": [
      "All critical user stories must have passes=true",
      "All high priority user stories must have passes=true",
      "npm run validate must exit with code 0",
      "Test coverage must be >= 80%",
      "No TypeScript errors",
      "No linting errors",
      "Application loads successfully at localhost:5175 for all data structures",
      "All data structures load without console errors or blank screens",
      "All reference solutions execute successfully across all data structures and difficulty levels",
      "Agent-browser verification confirms all acceptance criteria met"
    ],
    "recommended": [
      "Bundle size is under 4MB",
      "All animations maintain 60fps",
      "Visualizations render correctly for all data structures",
      "No D3/React conflicts or warnings in console"
    ]
  },
  "technicalNotes": {
    "testingApproach": "Use agent-browser for automated UI verification. Each user story includes specific agent-browser commands for validation.",
    "testingMethodology": "Systematic testing performed 2026-01-15 using agent-browser. Each data structure tested with Show Solution + Run All Tests workflow across all difficulty levels.",
    "devServer": "npm run dev starts development server at http://localhost:5175",
    "validation": "npm run validate runs all checks: lint + format + typecheck + test",
    "browserRequirements": "Chrome/Chromium required for agent-browser testing",
    "sandboxSecurity": "User code runs in sandboxed iframe with allow-scripts only",
    "performanceTargets": {
      "bundleSize": "< 4MB",
      "swcTransform": "< 10ms",
      "d3Rendering": "16ms (60fps)",
      "testExecution": "< 1s per test case"
    },
    "bugDiscoverySession": {
      "date": "2026-01-15",
      "tool": "agent-browser",
      "coverage": "All 7 data structures tested (Array, LinkedList, Stack, Queue, Binary Tree, Graph, HashMap)",
      "testPattern": "Navigate to ?ds={structure}&difficulty=easy -> Click Show Solution -> Click Run All Tests -> Check results and console",
      "bugsDiscovered": [
        "Array: undefined returns",
        "LinkedList: null returns + visualization bug",
        "Stack/Queue: shared tests not filtered + factory functions undefined",
        "BinaryTree: null values in arrays",
        "Graph: undefined returns",
        "HashMap: property access errors"
      ]
    },
    "rootCauseAnalysis": {
      "stackQueueSharing": "src/App.tsx lines 75-77 return stackQueueTests for both stack and queue without filtering by test ID prefix",
      "factoryFunctions": "createTrackedStack and createTrackedQueue may not be exported or bundled for sandbox execution",
      "undefinedReturns": "Reference solutions may not be properly injected or executed in sandbox iframe",
      "nullValues": "Binary tree traversal includes null children in result arrays"
    },
    "ralphWiggumBestPractices": {
      "source": "https://www.aihero.dev/tips-for-ai-coding-with-ralph-wiggum",
      "appliedPractices": [
        "Atomic user stories with clear acceptance criteria",
        "Each bug is bite-sized and independently fixable",
        "Auto-runnable verification steps using agent-browser",
        "No human gut-checks - agent can verify itself",
        "Progress tracking via passes: true/false field",
        "Living TODO list (PRD is scope definition + progress tracker)",
        "Explicit stop conditions (completionCriteria)",
        "Technical details for implementation guidance",
        "Session metadata tracking (iteration, date, tools used)",
        "Priority-based fix ordering for efficient debugging"
      ]
    }
  }
}
